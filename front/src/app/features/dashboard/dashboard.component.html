<p-toast></p-toast>

<div class="p-4 md:p-6 space-y-6">
  <!-- ===== KPIs ===== -->
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4">
    <p-card styleClass="tile">
      <div class="tile-icon bg-blue-500"><i class="pi pi-users"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalUsers }}</div>
        <div class="opacity-70">Usuarios totales</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-green-500"><i class="pi pi-user"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalStudents }}</div>
        <div class="opacity-70">Estudiantes</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-purple-500"><i class="pi pi-briefcase"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalInvestors }}</div>
        <div class="opacity-70">Inversores</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-teal-500"><i class="pi pi-folder-open"></i></div>
      <div>
        <div class="tile-value">{{ kpis.fundedProjects }}</div>
        <div class="opacity-70">Proyectos financiados</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-orange-500"><i class="pi pi-dollar"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalInvested | number:'1.0-0' }}</div>
        <div class="opacity-70">USD Invertidos</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-cyan-500"><i class="pi pi-dollar"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalInvestedARS | number:'1.0-0' }}</div>
        <div class="opacity-70">ARS Invertidos</div>
      </div>
    </p-card>
    <p-card styleClass="tile">
      <div class="tile-icon bg-red-500"><i class="pi pi-dollar"></i></div>
      <div>
        <div class="tile-value">{{ kpis.totalInvestedCNY | number:'1.0-0' }}</div>
        <div class="opacity-70">CNY Invertidos</div>
      </div>
    </p-card>
  </div>

  <!-- ===== Charts (Fila 1) ===== -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Estudiantes por estado de carrera -->
    <p-card header="Estudiantes por Estado de Carrera" styleClass="h-full">
      <div class="h-64 relative">
        <p-chart type="doughnut" [data]="studentsByDegreeData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>

    <!-- Proyectos por estado -->
    <p-card header="Proyectos por Estado" styleClass="h-full">
      <div class="h-64 relative">
        <p-chart type="doughnut" [data]="projectsByStatusData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>

    <!-- Usuarios por Rol -->
    <p-card header="Usuarios por Rol" styleClass="h-full">
      <div class="h-64 relative">
        <p-chart type="bar" [data]="usersByRoleData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>
  </div>

  <!-- ===== Charts (Fila 2 - Timelines) ===== -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Línea de tiempo de Proyectos -->
    <p-card header="Proyectos Actualizados por Mes" styleClass="h-full">
      <div class="h-80 relative">
        <p-chart type="line" [data]="projectsTimelineData" [options]="projectsLineOptions"></p-chart>
      </div>
    </p-card>

    <!-- Línea de tiempo de Inversiones -->
    <p-card header="Monto Invertido por Mes" styleClass="h-full">
      <div class="h-80 relative">
        <p-chart type="line" [data]="investmentsTimelineData" [options]="projectsLineOptions"></p-chart>
      </div>
    </p-card>
  </div>

  <!-- ===== Charts (Fila 3) ===== -->
  <div class="grid grid-cols-1 gap-6">
    <!-- Estudiantes por Universidad -->
    <p-card header="Estudiantes por Universidad" styleClass="h-full">
      <div class="h-80 relative">
        <p-chart type="bar" [data]="universitiesData" [options]="chartOptions"></p-chart>
      </div>
    </p-card>
  </div>

  <!-- Resumen de Actividad -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <p-card>
      <ng-template pTemplate="title">Actividad de Estudiantes</ng-template>
      <div class="space-y-2">
        <div class="flex justify-between">
          <span>Activos</span>
          <p-tag [value]="kpis.activeStudents" severity="success"></p-tag>
        </div>
        <div class="flex justify-between">
          <span>Inactivos</span>
          <p-tag [value]="kpis.inactiveStudents" severity="warning"></p-tag>
        </div>
        <div class="flex justify-between font-semibold border-t pt-2 mt-2">
          <span>Total</span>
          <span>{{ kpis.totalStudents }}</span>
        </div>
      </div>
    </p-card>
    <p-card>
      <ng-template pTemplate="title">Actividad de Inversores</ng-template>
      <div class="space-y-2">
        <div class="flex justify-between">
          <span>Activos</span>
          <p-tag [value]="kpis.activeInvestors" severity="success"></p-tag>
        </div>
        <div class="flex justify-between">
          <span>Inactivos</span>
          <p-tag [value]="kpis.inactiveInvestors" severity="warning"></p-tag>
        </div>
        <div class="flex justify-between font-semibold border-t pt-2 mt-2">
          <span>Total</span>
          <span>{{ kpis.totalInvestors }}</span>
        </div>
      </div>
    </p-card>
  </div>
</div>